!function(e){var t={};function n(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(a,o,function(t){return e[t]}.bind(null,o));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";!function(e){var t,n,a=document.querySelectorAll(".lama-search"),o=!0;function l(){var e=" -webkit- -moz- -o- -ms- ".split(" ");return!!("ontouchstart"in window||window.DocumentTouch&&function(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}(document,DocumentTouch))||function(e){return window.matchMedia(e).matches}(["(",e.join("touch-enabled),("),"heartz",")"].join(""))}function i(){for(var e=document.querySelectorAll(".lama__dropdown"),t=function(){for(var e=document.createElement("fakeelement"),t={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"},n=Object.keys(t),a=0,o=n.length;a<o;a++){var l=n[a];if(void 0!==e.style[l])return t[l]}return null}(),n=0;n<e.length;n++){var a=e[n];if(!a.classList.contains("visible"))return;if(t){var o=a.querySelector(".lama__dropdown__list");o.style.height="0",o.addEventListener(t,function e(){this.style.display="none",this.removeEventListener(t,e)})}else a.style.display="none";a.classList.remove("visible")}}function r(a,l){if(!a.classList.contains("lama"))return!0;l&&l.preventDefault();var i=e(a);i.find('input[name="lama-more"]').val(o?0:1);var r=i.serialize(),s=i.find(".lama-container");return(!o||r!=n)&&(n=r,i.addClass("lama--ajax"),function(e){var t,n=e.split("&"),a=[],o={},l=window.location.search.substr(1),i=window.location.hash,r={};l.split("&").forEach(function(e){var t=e.split("=");r[t[0]]=decodeURIComponent(t[1])}),o=r,n.forEach(function(e){if(-1===e.indexOf("posts-")&&-1===e.indexOf("query-")){var t=e.split("=")[0];o[t]&&delete o[t],t.length>0&&a.push(e)}}),t=lama.archiveurl;var s=a.join("&"),c=t+(s.length?"?":"")+s+i;window.MSInputMethodContext&&document.documentMode||window.history.pushState({},"",c)}(r),function(n,a,l){t&&t.abort(),e("body").trigger("lamaStart",[n,l]);var i={action:"nine3_lama",nonce:lama.nonce,lamaFilter:!0,lamaName:n.attr("name"),lamaAppend:!o,params:a,uid:n.data("uid")};n.removeClass("lama--done"),t=e.ajax({type:"POST",url:lama.ajaxurl,data:i,success:function(t){o&&l.empty();var a=e(t);if(a.length){a.not(".lama-posts-found").addClass("loaded"),l.append(a);var i=parseInt(l.find("lama-found").html(),10),r=(parseInt(l.find("lama-posts-count").html(),10),parseInt(l.find("lama-offset").html(),10)),s=l.find("lama-tax").html(),c=s.split(",");s.length&&e(".lama__select.lama-filter option").each(function(e,t){c.includes(t.value)||""===t.value||null==t.value||"ASC"===t.value||"DESC"===t.value?t.removeAttribute("disabled"):t.setAttribute("disabled","disabled")}),n.find('input[name="posts-offset"]').val(r),0===i||r===i?n.addClass("lama-more--none"):n.removeClass("lama-more--none");var d=n.find(".lama-posts-found__label");d.length&&d.html(l.find("lama-posts-found-label").html()),l.find("lama-tax").remove(),l.find("lama-found").remove(),l.find("lama-offset").remove(),l.find("lama-posts-count").remove(),l.find("lama-posts-found-label").remove(),n.removeClass("lama--ajax"),n.addClass("lama--done")}else n.addClass("lama-more--none");o=!0,e("body").trigger("lamaDone",[l,a])}})}(i,r,s),!1)}document.addEventListener("click",function(t){var n=t.target,a=n.parentNode;a.classList.contains("lama__dropdown__selected")&&(a=(n=a).parentNode);var o=a.classList.contains("visible");if(i(),!o)if(n.classList.contains("lama__dropdown__selected")){var l=n.nextSibling;l.style.maxHeight="none",l.style.height="0px",l.style.display="block",l.style.height="".concat(l.children[0].clientHeight,"px"),a.classList.add("visible"),t.stopPropagation()}else if(n.classList.contains("lama__dropdown__list__button")){var s=n.getAttribute("name"),c=e(n).closest("form")[0].querySelector('select[data-filter="'.concat(s,'"]')),d=e(n).closest(".lama__dropdown")[0].querySelector(".lama__dropdown__selected__label");c.value=n.value,d.innerHTML=n.innerHTML}else if(n.classList.contains("lama-filter")&&n.type&&["checkbox","radio"].indexOf(n.type)>=0){r(e(n).closest("form")[0])}}),document.querySelectorAll(".lama-date").forEach(function(t){t.addEventListener("input",function(n){r(e(t).closest("form")[0])})});for(var s=function(t){var n=a[t];for(d=e(n).closest("form.lama")[0],u=parseInt(n.getAttribute("data-debounce"),10)||200,f=null,n.addEventListener("input",function(){clearTimeout(f),f=setTimeout(function(){r(d)},u)}),m=document.querySelectorAll(".lama .g02__suggested-link"),v=function(e){m[e].addEventListener("click",function(t){var a=m[e].innerHTML;t.preventDefault(),n.value=a,r(d)})},p=0;p<m.length;p++)v(p)},c=0;c<a.length;c++){var d,u,f,m,v,p;s(c)}e("body").on("click",".lama-submit",function(){o=!1,r(e(event.target).closest("form")[0])}).ready(function(){l()&&e("form.lama").addClass("is-touch"),n=e("form.lama").first().serialize()}).on("change",".lama__select",function(){var t=e(this),n=t.closest("form");(n.hasClass("is-touch")||t.hasClass("default-style"))&&r(n.get(0))}),e("body").on("submit",function(e){r(e.target,e)}),e('.lama button[type="reset"]').on("click",function(){e(".lama__select option").each(function(){e(this).prop("disabled")?e(this).attr("selected","selected"):e(this).removeAttr("selected")})});var h=!!window.MSInputMethodContext&&!!document.documentMode;document.addEventListener("reset",function(e){if(h){var t=window.location.href,n=t.substring(0,t.indexOf("?"));window.location.href=n+"?f=#filters"}else!function(e){var t=e.elements;e.reset();for(var n=0;n<t.length;n++){var a=t[n];switch(a.type.toLowerCase()){case"search":a.value="",a.defaultValue="";break;case"text":case"password":case"textarea":case"hidden":case"date":a.value="";break;case"radio":case"checkbox":a.checked&&(a.checked=!1);break;case"select":case"select-one":case"select-multi":a.selectedIndex=0}}r(e)}(e.target)})}(jQuery)}]);
//# sourceMappingURL=lama.js.map